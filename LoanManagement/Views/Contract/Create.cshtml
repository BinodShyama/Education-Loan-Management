@model LoanManagement.ViewModel.Members.MemberLoanDetailDto

@{
    ViewData["Title"] = "Create";
}

<div id="page-head">

    <div id="page-title">
        <h1 class="page-header text-overflow">Create Loan Contract</h1>
    </div>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa-solid fa-house"></i></a></li>
        <li><a href="/Member/Index">Member List</a></li>
        <li class="active">New Member</li>
    </ol>

</div>
<div id="page-content">
    <div class="card">
        <div class="panel-heading">
            <p class="panel-title">Create New Loan Contract (<span style="color:blue;font-weight:bold">100:- Member Name</span>)</p>
        </div>
        <div class="panel-body">
            <div class="panel-body">
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="row col-md-12 pt-4">
                        <div class="panel-heading row col-md-12">
                            <h3 class="panel-title">Security Detials (Personal Guarantee)</h3>
                        </div>
                        <div class="form-group col-md-4">
                            <label>Full Name<span class="text-danger pl-1" title="Required field">*</span></label>
                            <input asp-for="LoanGuarantorName" placeholder="Enter Full Name" class="form-control">
                            <span asp-validation-for="LoanGuarantorName"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="LoanGuarantorRelationship">Relationship</label>
                            <input placeholder="Enter relationship" asp-for="LoanGuarantorRelationship" class="form-control">
                            <span asp-validation-for="LoanGuarantorRelationship"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="LoanGuarantorContactNo">Contact no.<span class="text-danger pl-1" title="Required field">*</span></label>
                            <input placeholder="Enter contact no" asp-for="LoanGuarantorContactNo" class="form-control">
                            <span asp-validation-for="LoanGuarantorContactNo"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="LoanGuarantorCitizenshipNo">Citizenship Number<span class="text-danger pl-1" title="Required field">*</span></label>
                            <input placeholder="Enter Citizenship No." asp-for="LoanGuarantorCitizenshipNo" class="form-control">
                            <span asp-validation-for="LoanGuarantorCitizenshipNo"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="LoanGuarantorCitizenshipIssueDistrict">Citizenship Issued District<span class="text-danger" title="Required field">*</span></label>
                            <select asp-for="LoanGuarantorCitizenshipIssueDistrict" class="custom-select w-100 select-chosen" asp-items="@ViewBag.District" required="">
                                <option value="">Choose District</option>
                            </select>
                            <span asp-validation-for="LoanGuarantorCitizenshipIssueDistrict"></span>
                        </div>
                    </div>
                    @*<div class="form-group">
                            <label asp-for="Id" class="control-label"></label>
                            <input asp-for="Id" class="form-control" />
                            <span asp-validation-for="Id" class="text-danger"></span>
                        </div>*@

                    <div class="row col-md-12">
                        <div class="panel-heading row col-md-12">
                            <h3 class="panel-title">Detials of Course Study</h3>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="Degree" class="control-label">Degree</label>
                            <input asp-for="Degree" class="form-control" />
                            <span asp-validation-for="Degree" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="Institution" class="control-label">Institution</label>
                            <input asp-for="Institution" class="form-control" />
                            <span asp-validation-for="Institution" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="University" class="control-label">University</label>
                            <input asp-for="University" class="form-control" />
                            <span asp-validation-for="University" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="Country" class="control-label">Country</label>
                            <input asp-for="Country" value="Nepal" class="form-control" />
                            <span asp-validation-for="Country" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="Duration" class="control-label">Duration of Course(in years)</label>
                            <input asp-for="Duration" class="form-control" />
                            <span asp-validation-for="Duration" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="DateOfCommencementNep" class="control-label">Date of commencement</label>
                            <input asp-for="DateOfCommencementNep" class="form-control" />
                            <span asp-validation-for="DateOfCommencementNep" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row col-md-12">
                        <div class="panel-heading row col-md-12">
                            <h3 class="panel-title">Amount of Loan Applied</h3>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="LoanAmount" class="control-label">Amount</label>
                            <input asp-for="LoanAmount" step="0.01" class="form-control" id="LoanAmount" />
                            <span asp-validation-for="LoanAmount" class="text-danger"></span>
                        </div>
                        <div class="row col-md-12">
                            <div class="table-responsive ml-3">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Installment No.</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Installment 1</td>
                                            <td>
                                                <input readonly asp-for="Installment1" step="0.01" class="form-control" />
                                                <span asp-validation-for="Installment1" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Installment 2</td>
                                            <td>
                                                <input readonly asp-for="Installment2" step="0.01" class="form-control" />
                                                <span asp-validation-for="Installment2" class="text-danger"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Installment 3</td>
                                            <td>
                                                <input readonly asp-for="Installment3" step="0.01" class="form-control" />
                                                <span asp-validation-for="Installment3" class="text-danger"></span>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Create" class="btn btn-primary" />
                    </div>
                </form>
            </div>
        </div>


    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.select-chosen').chosen();
            $('form').validate().settings.ignore = []
        });
        $('#LoanAmount').on('keyup', function () {
            if ($(this).val().trim() == '') {
                $('input[name="InstallmentFirst"]').val(0);
                $('input[name="InstallmentSecond"]').val(0);
                $('input[name="InstallmentThird"]').val(0);
                return;
            }
            var a = parseFloat($(this).val());
            if (!isNaN(a)) {
                $('input[name="InstallmentFirst"]').val(0.30 * a);
                $('input[name="InstallmentSecond"]').val(0.30 * a);
                $('input[name="InstallmentThird"]').val(0.40 * a);
            }
        })
    </script>
}